{"version":3,"file":"formio-loader.min.js","mappings":"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","sources":["webpack://formio-qld/webpack/universalModuleDefinition","webpack://formio-qld/webpack/bootstrap","webpack://formio-qld/webpack/runtime/define property getters","webpack://formio-qld/webpack/runtime/hasOwnProperty shorthand","webpack://formio-qld/webpack/runtime/make namespace object","webpack://formio-qld/./src/matrixHelpers/FormioLoader/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FormioLoader\"] = factory();\n\telse\n\t\troot[\"FormioLoader\"] = factory();\n})(globalThis, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const initFormioInstance = (formioElem, opts) => {\n  // if already initiated, reject\n  if (formioElem.dataset.formioFormUrl) return;\n  // if doesn't have required options, reject\n  if (!opts.envUrl || !opts.projectName || !opts.formName) {\n    console.warn(\n      \"Require envUrl, projectName, formName to initiate the form.\",\n      opts\n    );\n    return;\n  }\n  const bodyContainer = $(\"body\");\n  const defaultRedirect = \"contact-us/response/\";\n  /*\n   * setup config\n   */\n  const baseUrl = `https://${opts.envUrl.trim()}`;\n  const formioContainerId = formioElem.getAttribute(\"id\");\n  const submitBtn = $(`#${formioContainerId} button[name='data[submit]']`);\n  let formName = \"\";\n  // Check if value is true/exists and is numeric\n  if (opts.form_revision) {\n    formName = `${opts.formName}/v/${opts.form_revision}`;\n  } else {\n    formName = opts.formName;\n  }\n  const { projectName } = opts;\n  const formConfirmation = opts.formConfirmation || defaultRedirect;\n  const namespace = opts.namespace || `formio-${projectName}`;\n  const formUrl = `${baseUrl}/${projectName}/${formName}`;\n\n  /*\n   * init formio instance\n   */\n  const formio = new Formio(formUrl, {\n    base: baseUrl,\n    project: `${baseUrl}/${projectName}`,\n    namespace,\n  });\n  formioElem.dataset.formio = JSON.stringify(formio);\n  formioElem.dataset.formioFormUrl = formUrl;\n\n  /*\n   * load formio form\n   */\n  Formio.createForm(\n    formioElem,\n    formUrl,\n    // form,\n    {\n      // Turn off default buttons\n      buttonSettings: {\n        showCancel: false,\n        showPrevious: false,\n        showNext: false,\n        showSubmit: false,\n      },\n      i18n: {\n        en: { pattern: \"Must use the format shown\" },\n      },\n      formio,\n      namespace: formio.options.namespace,\n    }\n  ).then((wizard) => {\n    wizard.formio = formio;\n    wizard.options.formio = formio;\n\n    // eslint-disable-next-line no-underscore-dangle\n    const formTitle = wizard._form.title;\n    // eslint-disable-next-line no-underscore-dangle\n    const formModified = wizard._form.modified;\n\n    // Force new tab on formlinks\n    bodyContainer.on(\"click\", `#${formioContainerId} a`, (e) => {\n      e.target.target = \"_blank\";\n    });\n\n    // Change event/GTM\n    wizard.on(\"click\", (change) => {\n      const changeObj = change;\n      if (\n        typeof changeObj.changed !== \"undefined\" &&\n        typeof changeObj.changed.component !== \"undefined\"\n      ) {\n        window.dataLayer.push({\n          event: \"formio-interaction\",\n          \"formio-name\": formTitle,\n          \"formio-input-id\": changeObj.changed.component.id,\n          \"formio-input-type\": changeObj.changed.component.type,\n          \"formio-input-value\": changeObj.changed.component.value,\n          \"formio-input-key\": changeObj.changed.component.key,\n          \"formio-input-label-raw\": changeObj.changed.component.label,\n          \"formio-version\": formModified,\n          \"formio-category\": `Form: ${formTitle}`,\n          \"formio-action\": \"Value changed\",\n        });\n      }\n    });\n\n    // Must use 'applicationSubmit' custom event on primary submit\n    wizard.on(\"applicationSubmit\", () => {\n      submitBtn.attr(\"disabled\", true);\n      wizard\n        .submit()\n        .then(() => {\n          if (formConfirmation) {\n            window.location.href = `/${formConfirmation}`;\n          } else {\n            // No confirmation set. Using generic redirection\n            window.location.href = defaultRedirect;\n          }\n        })\n        .catch(() => {\n          console.debug(\"Submission error\");\n        });\n    });\n  });\n};\n\n// polyfill plugin function to fix the namespace option doesn't pass to Formio.makeRequest\nconst NamespacePlugin = {\n  priority: 0,\n  preRequest(requestArgs) {\n    if (requestArgs.formio) {\n      const formioInstance = document.querySelector(\n        `[data-form-url=\"${requestArgs.formio.formUrl}\"]`\n      );\n      if (formioInstance) {\n        requestArgs.formio = JSON.parse(formioInstance.dataset.formio);\n        requestArgs.opts.formio = requestArgs.formio;\n      }\n      if (requestArgs.formio.options)\n        requestArgs.opts.namespace = requestArgs.formio.options.namespace;\n    }\n    return Promise.resolve(null);\n  },\n};\n\nconst customiseErrorMessage = () => {\n  const newFunc = Formio.Form.prototype.errorForm.bind({});\n  Formio.Form.prototype.errorForm = (err) => {\n    if (\n      (typeof err === \"string\" &&\n        err.indexOf(\"Could not connect to API server\") !== -1) ||\n      (typeof err === \"object\" && err.networkError)\n    ) {\n      console.warn(\"formio error: \", err);\n      return newFunc(\n        \"This form is currently unavailable due to maintenance. Please try again later.\"\n      );\n    }\n    return newFunc(err);\n  };\n};\n\nconst initFormio = () => {\n  window.dataLayer = window.dataLayer || [];\n\n  // Init form\n  Formio.icons = \"fontawesome\";\n  if (premium) Formio.use(premium);\n\n  // custom error message\n  customiseErrorMessage();\n\n  // register plugin\n  Formio.registerPlugin(NamespacePlugin, \"namespacePolyfill\");\n\n  document.querySelectorAll(\"[data-formio]\").forEach((formioElem) => {\n    const {\n      formioProjectName,\n      formioFormName,\n      formioEnvUrl,\n      formioPdfDownload,\n      formioFormConfirmation,\n      formioFormRevision,\n      formioNamespace,\n    } = formioElem.dataset;\n    initFormioInstance(formioElem, {\n      projectName: formioProjectName,\n      formName: formioFormName,\n      envUrl: formioEnvUrl,\n      pdfDownload: formioPdfDownload,\n      formConfirmation: formioFormConfirmation,\n      formRevision: formioFormRevision,\n      namespace: formioNamespace,\n    });\n  });\n};\n\ninitFormio();\n\n// Persistent fix for iPhone/Safari\nwindow.onpageshow = (event) => {\n  if (event.persisted) {\n    window.location.reload();\n  }\n};\n\nexport { initFormio, initFormioInstance };\n"],"names":["root","factory","exports","module","define","amd","globalThis","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","initFormioInstance","formioElem","opts","dataset","formioFormUrl","envUrl","projectName","formName","console","warn","bodyContainer","$","defaultRedirect","baseUrl","trim","formioContainerId","getAttribute","submitBtn","form_revision","formConfirmation","namespace","formUrl","formio","Formio","base","project","JSON","stringify","createForm","buttonSettings","showCancel","showPrevious","showNext","showSubmit","i18n","en","pattern","options","then","wizard","formTitle","_form","title","formModified","modified","on","e","target","change","changeObj","changed","component","window","dataLayer","push","event","id","type","label","attr","submit","location","href","catch","debug","NamespacePlugin","priority","preRequest","requestArgs","formioInstance","document","querySelector","parse","Promise","resolve","initFormio","icons","premium","use","newFunc","Form","errorForm","bind","err","indexOf","networkError","customiseErrorMessage","registerPlugin","querySelectorAll","forEach","formioProjectName","formioFormName","formioEnvUrl","formioPdfDownload","formioFormConfirmation","formioFormRevision","formioNamespace","pdfDownload","formRevision","onpageshow","persisted","reload"],"sourceRoot":""}